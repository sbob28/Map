<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Wings Across the World:
     Why Birds Migrate</title>
  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
  <link href="https://fonts.googleapis.com/css2?family=Actor&family=Signika+Negative:wght@400;600&family=Sigmar+One&display=swap" rel="stylesheet">

  <style>
    body {
      font-family: "Actor", sans-serif;
      margin: 0;
      background-color: #fafafa;
      text-align: center;
      padding: 10px; 
    }

    .page-container {
      max-width: 1200px;
      margin: auto;
      background: #ffffff;
      padding: 30px;
      border: 30px solid #004d40; 
      border-radius: 20px; 
    }

    h2 {
      font-family: "Sigmar One", cursive;
      color: #004d40;
      margin-bottom: 0.3em;
      font-size: 3.2rem;
    }
    h3 {
      font-family: "Signika Negative", sans-serif;
      margin-top: 2em;
      font-size: 2rem;
      color: #00695c;
    }
    h4 {
      font-family: "Signika Negative", sans-serif;
      color: #004d40;
      margin-bottom: 0.5em;
    }
    p {
      max-width: 850px;
      margin: 0.5em auto;
      line-height: 1.6;
      font-size: 1.2rem;
      color: #333;
    }

    #bird {
      width: 200px;
      animation: flyIn 5s ease-in forwards, flap 5s ease-in 10s infinite;
      transform-origin: center top;
    }
    @keyframes flyIn {
      0% { transform: translateX(-200px) translateY(-60px) rotate(-20deg); opacity:0; }
    }
    @keyframes flap {
      0%,100% {transform:translateY(0) rotate(0deg) scaleY(1);}
    }

    .chart { margin: 0px auto; }

    .flowmap-wrapper {
      display: flex;
      justify-content: center;
      align-items: flex-start;
      gap: 0px;
      margin-top: 50px;
      flex-wrap: wrap;
    }

    #flowmap { flex: 1 1 850px; height: 550px; }
    #flowmap-controls {
      width: 230px;
      text-align: left;
      background: transparent;
    }

    select {
      width: 100%;
      padding: 1px;
      border-radius: 10px;
      border: 1px solid #aaa;
      font-family: "Actor";
      background: white;
    }

    #flowmap-legend div {
      display: flex;
      align-items: center;
      margin-bottom: 0px;
      cursor: pointer;
    }
    #flowmap-legend span {
      width: 14px;
      height: 14px;
      display: inline-block;
      border-radius: 3px;
      margin-right: 8px;
    }

    footer {
      margin-top: 4em;
      font-size: 0.9rem;
      color: #555;
    }

    @media(max-width:900px){
      .flowmap-wrapper { flex-direction: column; align-items: center; }
      #flowmap-controls { width: 90%; text-align: center; }
    }

    .graph-guide, .graph-insights {
      background-color: #f8f9f6;
      border-left: 4px solid #2b5a3d;
      padding: 1em;
      margin: 1.5em 0;
      border-radius: 0.75em;
    }

    .graph-guide h4, .graph-insights h4 {
      margin-top: 0;
      color: #2b5a3d;
    }
  </style>
</head>
<body>

  <div class="page-container">

    <h2>
      Wings Across the World: Why Birds Migrate
      <br>
      <img src="bird_flying.gif" id="bird" alt="bird" />
    </h2>

    <p>
      Birds embark on migrations for a variety of compelling reasons: to breed, to find food, to avoid predators, or to follow seasonal changes. 
      Each motivation shapes a unique journey, influencing how far and how long birds travel, as well as whether they move alone or in flocks. 
      This visual story uncovers how these <strong>migration motives</strong> drive the patterns and strategies we observe across species and regions.
    </p>

    <h3>Global Migration Routes</h3>
    <p>
      Migration begins with purpose.  
      The flow map below traces long-distance journeys lasting over 70 hours, showing how migration reasons affect routes across the globe.  
      Choose a reason to uncover how motivations (like breeding or escaping predators) influence each species’ path.
    </p>

    <div class="graph-guide">
      <h4>How to Read the Graph</h4>
      <p>
        This world map traces bird migration routes lasting over 70 hours.  
        Each line connects the start (green) and end (red) of a journey.  
        Use the dropdown to filter by <strong>migration reason</strong> and click on species names in the legend to highlight them.
      </p>
    </div>

    <div class="flowmap-wrapper">
      <div id="flowmap" class="chart"></div>
      <div id="flowmap-controls">
        <h4>Filter by Migration Reason</h4>
        <div id="reason-toggle"></div>
        <p style="margin-top:1em;"><strong>Species Legend:</strong></p>
        <div id="flowmap-legend"></div>
      </div>
    </div>

    <div class="graph-insights">
      <h4>Insights</h4>
      <p>
        The migration reason strongly influences both the geographic routes and the flight duration of bird migrations. 
        Birds migrating for climate change or feeding tend to travel longer distances across continents, 
        showing wider dispersal between start and end coordinates, while breeding or predator avoidance migrations 
        are typically shorter and more regional. Consequently, migrations driven by environmental pressures 
        (e.g. climate change) exhibit longer flight durations and broader latitude shifts, reflecting the species’ 
        adaptive response to large-scale habitat changes, whereas biological or threat-driven migrations 
        are more time-efficient and localised.
      </p>
    </div>

    <h3>How Distance Varies by Reason</h3>
    <p>
      Not all journeys are equal.  
      Some migration reasons demand long intercontinental flights, while others involve shorter regional movements.  
      The box plot compares flight distances for each species — revealing how purpose shapes endurance and travel range.
    </p>

    <div class="graph-guide">
      <h4>How to Read the Graph</h4>
      <p>
        Each box represents the distribution of <strong>flight distances (km)</strong> for each bird species.  
        The line inside shows the <strong>median distance</strong>, while dots mark <strong>outliers</strong>.  
        Use the dropdown to filter by migration reason and observe how flight distances vary across motivations.
      </p>
    </div>

    <div id="boxplot" class="chart"></div>

    <div class="graph-insights">
      <h4>Insights</h4>
      <p>
        The migration reason has a clear influence on the flight distance across different species. 
        Birds migrating due to climate change or feeding generally show greater variation and longer 
        average flight distances, suggesting large-scale relocations in search of suitable environments 
        or food sources. In contrast, breeding and predator avoidance migrations tend to have shorter, 
        more consistent flight distances, indicating local or seasonal movements rather than extensive 
        interregional travel.
      </p>
    </div>

    <h3>Time in the Air</h3>
    <p>
      The length of each flight tells us how demanding migration can be.  
      This scatter plot explores how flight duration relates to distance for different species — filtered by migration reason.  
      It highlights how motivations like breeding or feeding lead to distinct flight efficiencies and strategies.
    </p>

    <div class="graph-guide">
      <h4>How to Read the Graph</h4>
      <p>
        This visualisation shows how <strong>flight duration and distance</strong> vary across bird species, with each point representing a single observation and colors indicating species. 
        Click on a species in the legend to highlight it, view its average flight duration and distance with dashed lines, and see a breakdown of migration reasons in the bar chart below.
      </p>
    </div>

    <div id="scatter" class="chart"></div>

    <div class="graph-insights">
      <h4>Insights</h4>
      <p>
        There is a clear positive correlation between flight distance and flight duration, 
        with birds that travel farther spending more time in the air. Birds migrating for climate change or 
        feeding reasons generally cover longer distances more efficiently, showing slightly lower hours per 
        kilometre travelled. In contrast, migrations driven by breeding or predator avoidance tend to be shorter 
        and slower, indicating more frequent rest stops and localised movement patterns.  
      </p>
    </div>

    <h3>Travelling Together</h3>
    <p>
      Some reasons for migration encourage flocking — protection, cooperation, and shared routes.  
      The histogram below shows how flock sizes change depending on the migration reason, 
      uncovering patterns of social behaviour during successful journeys.
    </p>

    <div class="graph-guide">
      <h4>How to Read the Graph</h4>
      <p>
        This graph shows the distribution of <strong>flock sizes</strong> for different bird species, with colors representing species and bars showing the frequency of observations. 
        Use the dropdown to filter by migration reason, and note the dashed line marking the median flock size for quick reference.
      </p>
    </div>

    <div id="histogram" class="chart"></div>

    <div class="graph-insights">
      <h4>Insights</h4>
      <p>
        Flock size varies noticeably by migration reason, with larger groups observed during feeding and climate 
        change migrations. These migrations likely promote collective movement for efficiency and survival over 
        long distances. Meanwhile, breeding and predator avoidance migrations tend to occur in smaller flocks, 
        reflecting more targeted and region-specific behaviours.
      </p>
    </div>

      <h3>Conclusion</h3>
      <p>
        Bird migration is a story of adaptation, purpose, and resilience.  
        Each migration reason, whether driven by climate, feeding, breeding, or survival, shapes how species move across the globe.  
        Environmental pressures like climate change encourage longer, more collective, and geographically broad migrations,  
        while biological needs such as breeding and predator avoidance favour shorter, localised journeys.  
        Together, these patterns reveal how deeply migration behaviour reflects the challenges and rhythms of the natural world.   
        This showcases birds’ remarkable ability to balance endurance, cooperation, and precision in their flight across continents.
      </p>
    </div>

    <footer>
      <strong>Data source:</strong> https://www.kaggle.com/datasets/sahirmaharajj/bird-migration-dataset-data-visualization-eda |
      <strong>Author:</strong> Srividya Bobba |
      <strong>Date:</strong> 10/10/2025
    </footer>

  </div>

  <script>
    let flowmapView, boxplotView, scatterView, histogramView;

    const reasons = ["All Reasons", "Breeding", "Avoid Predators", "Climate Change", "Feeding"];
    const dropdown = document.createElement("select");
    reasons.forEach(r => {
      const option = document.createElement("option");
      option.value = r === "All Reasons" ? "" : r;
      option.textContent = r;
      dropdown.appendChild(option);
    });
    document.getElementById("reason-toggle").appendChild(dropdown);

    dropdown.addEventListener("change", e => {
      const val = e.target.value || null;
      if(flowmapView) flowmapView.signal("reasonFilter", val).run();
      if(boxplotView) boxplotView.signal("reasonFilter", val).run();
      if(scatterView) scatterView.signal("reasonFilter", val).run();
      if(histogramView) histogramView.signal("reasonFilter", val).run();
    });

    vegaEmbed("#flowmap", "flowmap.json", {renderer: "canvas"}).then(result => {
      flowmapView = result.view;
      const species = ["Warbler", "Eagle", "Stork", "Hawk", "Crane", "Goose", "Swallow"];
      const colorScale = ["#66c2a5", "#fc8d62", "#8da0cb", "#e78ac3", "#a6d854", "#ffd92f", "#e5c494"];
      let selectedSpecies = null;
      const legendDiv = document.getElementById("flowmap-legend");

      species.forEach((s,i) => {
        const item = document.createElement("div");
        item.innerHTML = `<span style="background-color:${colorScale[i]}"></span>${s}`;
        item.addEventListener("click", () => {
          if(selectedSpecies === s){
            selectedSpecies = null;
            flowmapView.signal("speciesFilter", null).run();
          } else {
            selectedSpecies = s;
            flowmapView.signal("speciesFilter", s).run();
          }
        });
        legendDiv.appendChild(item);
      });
    });

    vegaEmbed("#boxplot", "boxplot.json", {renderer: "canvas"}).then(result => { boxplotView = result.view; });
    vegaEmbed("#scatter", "scatter.json", {renderer: "canvas"}).then(result => { scatterView = result.view; });
    vegaEmbed("#histogram", "stacked_histogram.json", {renderer: "canvas"}).then(result => { histogramView = result.view; });
  </script>
</body>
</html>
